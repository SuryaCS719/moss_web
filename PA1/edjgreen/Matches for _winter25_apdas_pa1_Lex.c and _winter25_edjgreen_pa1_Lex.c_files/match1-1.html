
<!-- saved from url=(0115)file:///Users/surya/Desktop/moss/cse101/pa1_report/moss_results/winter25_winter25/Lex.c/part_1/report/match1-1.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>/winter25/apdas/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr>
/winter25/edjgreen/pa1/Lex.c<p></p><pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

int main(int argc, char* argv[]) {

    FILE *in, *out;
    char** str = NULL;  
<a name="0"></a><font color="#FF0000"><a href="file:///Users/surya/Desktop/moss/cse101/pa1_report/moss_results/winter25_winter25/Lex.c/part_1/report/match1-0.html#0" target="0"><img align="left" alt="other" border="0" src="./tm_0_92.gif"></a>

    char line[256];
    List L = newList();
    int i, j, s_len, line_count = 0;


    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    in = fopen(argv[1], "r");
    if (in == NULL) {
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    while (fgets(line, 256, in) != NULL) {
        line_count++;
    }

  
    fclose(in);

   
    in = fopen(argv[1], "r");
    if (in == NULL) {
        fprintf(stderr, "Unable to reopen file %s for reading\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    
    str = (char**)malloc(line_count * sizeof(char*));
    if (str == NULL) {
        fprintf(stderr, "Error: unable to allocate memory for string array\n");
        fclose(in);
        exit(EXIT_FAILURE);
    }


    for (i = 0; i &lt; line_count; i++) {
        if (fgets(line, 256, in) != NULL) {
            s_len = strlen(line);

            while ((s_len &gt; 0) &amp;&amp; (line[s_len - 1] == '\n' || line[s_len - 1] == '\r')) {
                line[s_len - 1] = '\0';
                s_len--;
            }

         
            str[i] = (char*)malloc((s_len + 1) * sizeof(char));
            if (str[i] == NULL) {
                fprintf(stderr, "Error: unable to allocate memory for line %d\n", i);
                fclose(in);
                for (j = 0; j &lt; i; j++) {
                    free(str[j]);
                }
                free(str);
                exit(EXIT_FAILURE);
            }

        
            strcpy(str[i], line);
        }
    }

    
    fclose(in);

   
    if (line_count &gt; 0) {
        append(L, 0);
    }

 
    for (i = 1; i &lt; line_count; i++) {

        moveFront(L);

        while (index(L) &gt;= 0 &amp;&amp; strcmp(str[i], str[get(L)]) &gt;= 0) {
            moveNext(L);
        }

        if (index(L) &lt; 0) {
            append(L, i);
        } else {
            insertBefore(L, i);
        }
    }


    out = fopen(argv[2], "w");
    if (out == NULL) {
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        for (i = 0; i &lt; line_count; i++) {
            free(str[i]);
        }
        free(str);
        freeList(&amp;L);
        exit(EXIT_FAILURE);
    }

    
    moveFront(L);
    while (index(L) &gt;= 0) {
        fprintf(out, "%s\n", str[get(L)]);
        moveNext(L);
    }

    
    fclose(out);
    for (i = 0; i &lt; line_count; i++) {
        free(str[i]);
    }
    free(str);
    freeList(&amp;L);
</font>
    return 0;
}

</pre>


</body></html>