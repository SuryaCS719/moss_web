
<!-- saved from url=(0126)file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-1.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>/winter25/cmcruse/pa3/FindComponents.c</title>
</head>
<body bgcolor="white">
<hr>
/winter25/ssgajula/pa3/FindComponents.c<p></p><pre>//Suraj Gajula
//ssgajula
//2025 Winter CSE101 PA3
//FindComponents.c
//Client code getting SCCs using Graph ADT
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "Graph.h"
#include "List.h"

#define MAX_LINE_LENGTH 1024

<a name="1"></a><font color="#00FF00"><a href="file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-0.html#1" target="0"><img align="left" alt="other" border="0" src="./tm_1_15.gif"></a>

int read(FILE *in, char ***lines) {
    if (in == NULL || lines == NULL) {
        fprintf(stderr, "Error: Invalid input parameters in read()\n");
        return -1;
    }

    int count = 0;
    char buffer[MAX_LINE_LENGTH];
    *lines = NULL;

    while (fgets(buffer, sizeof(buffer), in)) {
        size_t len = strlen(buffer);
        if (len &gt; 0 &amp;&amp; buffer[len - 1] == '\n') {
            buffer[len - 1] = '\0';
        }

        char **temp = realloc(*lines, (count + 1) * sizeof(char *));
        if (temp == NULL) {
</font>            fprintf(stderr, "Error: Memory reallocation failed\n");
<a name="4"></a><font color="#FF00FF"><a href="file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-0.html#4" target="0"><img align="left" alt="other" border="0" src="./tm_4_7.gif"></a>

            for (int i = 0; i &lt; count; i++) {
                free((*lines)[i]);
            }
            free(*lines);
            *lines = NULL;
            return -1;
        }
        *lines = temp;

        (*lines)[count] = malloc(strlen(buffer) + 1);
        if ((*lines)[count] == NULL) {
</font>            fprintf(stderr, "Error: Memory allocation failed for line copy\n");
<a name="5"></a><font color="#FF0000"><a href="file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-0.html#5" target="0"><img align="left" alt="other" border="0" src="./tm_0_6.gif"></a>

            for (int i = 0; i &lt; count; i++) {
                free((*lines)[i]);
            }
            free(*lines);
            *lines = NULL;
            return -1;
        }
        strcpy((*lines)[count], buffer);
        count++;
    }
    return count;
}

int main(int argc, char *argv[]) {
</font><a name="0"></a><font color="#FF0000"><a href="file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-0.html#0" target="0"><img align="left" alt="other" border="0" src="./tm_0_32.gif"></a>

    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        return 1;
    }

    FILE *in = fopen(argv[1], "r");
    if (in == NULL) {
        fprintf(stderr, "Error: Cannot open input file %s\n", argv[1]);
        return 1;
    }

    char **lines = NULL;
    int count = read(in, &amp;lines);
    fclose(in);

    if (count == -1) {
        fprintf(stderr, "Error: Failed to read input file\n");
        return 1;
    }

    int order = atoi(lines[0]);
    Graph G = newGraph(order);

    int cur = 1;
    while (strcmp(lines[cur], "0 0") != 0) {
        int u, v;
        sscanf(lines[cur], "%d %d", &amp;u, &amp;v);
        addArc(G, u, v);
        cur++;
    }

    FILE *out = fopen(argv[2], "w");
    if (out == NULL) {
        fprintf(stderr, "Error: Cannot open output file %s\n", argv[2]);
        freeGraph(&amp;G);
        for (int i = 0; i &lt; count; i++) free(lines[i]);
        free(lines);
        return 1;
    }

    fprintf(out, "Adjacency list representation of G:\n");
    printGraph(out, G);
    List S = newList();
    for (int i = 1; i &lt;= order; i++) append(S, i);
</font>    DFS(G, S);
    Graph GT = transpose(G);
    DFS(GT, S);
    int num = 0;
    List SCCs[order];
<a name="3"></a><font color="#00FFFF"><a href="file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-0.html#3" target="0"><img align="left" alt="other" border="0" src="./tm_3_8.gif"></a>

    for (int i = 0; i &lt; order; i++) SCCs[i] = newList();

    moveFront(S);
    while (index(S) != -1) {
        int v = get(S);
        if (getParent(GT, v) == NIL) {
            num++;
        }
        append(SCCs[num - 1], v);
</font>        moveNext(S);
    }

<a name="2"></a><font color="#0000FF"><a href="file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-0.html#2" target="0"><img align="left" alt="other" border="0" src="./tm_2_11.gif"></a>

    fprintf(out, "\nG contains %d strongly connected components:\n", num);
    for (int i = 0; i &lt; num; i++) {
        fprintf(out, "Component %d: ", i + 1);
        moveFront(SCCs[num - i - 1]);
        while (index(SCCs[num - i - 1]) != -1) {
            fprintf(out, "%d ", get(SCCs[num - i - 1]));
            moveNext(SCCs[num - i - 1]);
</font>        }
        fprintf(out, "\n");
        freeList(&amp;SCCs[num - i - 1]);
    }

<a name="6"></a><font color="#00FF00"><a href="file:///Users/surya/Desktop/moss/cse101/pa3_report/moss_results/winter25_spring23/FindComponents.c/part_1/report/match0-0.html#6" target="0"><img align="left" alt="other" border="0" src="./tm_1_5.gif"></a>

    fclose(out);
    freeGraph(&amp;G);
    freeGraph(&amp;GT);
    freeList(&amp;S);
    for (int i = 0; i &lt; count; i++) free(lines[i]);
    free(lines);

    return 0;
</font>}</pre>


</body></html>