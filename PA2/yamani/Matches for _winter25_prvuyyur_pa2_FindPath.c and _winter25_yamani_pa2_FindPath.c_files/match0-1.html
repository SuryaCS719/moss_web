
<!-- saved from url=(0118)file:///Users/surya/Desktop/moss/cse101/pa2_report/moss_results/winter25_fall24/FindPath.c/part_1/report/match0-1.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>/winter25/prvuyyur/pa2/FindPath.c</title>
</head>
<body bgcolor="white">
<hr>
/winter25/yamani/pa2/FindPath.c<p></p><pre>#include "Graph.h"
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

<a name="0"></a><font color="#FF0000"><a href="file:///Users/surya/Desktop/moss/cse101/pa2_report/moss_results/winter25_fall24/FindPath.c/part_1/report/match0-0.html#0" target="0"><img align="left" alt="other" border="0" src="./tm_0_99.gif"></a>

int countLinesInFile(FILE* inFile) {
  char ch;
  int  lineExists = 0;
  int  lineNumber = 0;
  int  done       = 0;
  clearerr(inFile);
  fseek(inFile, 0, SEEK_SET);
  while (! done) {
    ch = fgetc(inFile);
    if (feof(inFile)) {
      done = 1;
    } else {
      lineExists = 1;
      if (ch == '\n') {
	lineNumber ++;
	lineExists = 0;
      }
    }
  }
  if (lineExists) {
    lineNumber ++;
  }
  return lineNumber;
}

int readLengthFromFile(FILE* inFile) {
  int  offset = ftell(inFile);
  int  done   = 0;
  int  len    = 0;
  char ch;
  while (! done) {
    ch = fgetc(inFile);
    if (feof(inFile)) {
      done = 1;
    } else {
      if (ch == '\n') {
	done = 1;
      } else {
	len ++;
      }
    }
  }
  clearerr(inFile);
  fseek(inFile, offset, SEEK_SET);
  return len;
}

void readLineFromFile(FILE* inFile, char* str) {
  int  done  = 0;
  int  index = 0;
  char ch;
  while (! done) {
    ch = fgetc(inFile);
    if (feof(inFile)) {
      done = 1;
    } else {
      if (ch == '\n') {
	done = 1;
      } else {
	str[index] = ch;
	index ++;
      }
    }
  }
  str[index] = '\0';
}

void readLinesFromFile(FILE* inFile, char** array) {
  int done      = 0;
  int lineIndex = 0;
  int len;
  clearerr(inFile);
  fseek(inFile, 0, SEEK_SET);
  
  while (! done) {
    len = readLengthFromFile(inFile);
    if (len == 0) {
      done = 1;
    } else {
      array[lineIndex] = (char*)malloc(sizeof(char) * (len + 1));
      readLineFromFile(inFile, array[lineIndex]);
      if (feof(inFile)) {
	done = 1;
      }
      lineIndex ++;
    }
  }
}

int main(int argc, char** argv) {
  if (argc != 3) {
    printf(" &lt;infile&gt; &lt;outfile&gt;\n");
    exit(-1);
  }
  char* inFileName  = argv[1];
  char* outFileName = argv[2];
  printf("FindPath %s %s\n", inFileName, outFileName);
  FILE* inFile = fopen(inFileName, "r");
  if (inFile == NULL) {
    printf(" \"%s\" will not open for reading.\n", inFileName);
    exit(1);
  }
  FILE* outFile = fopen(outFileName, "w");
  if (outFile == NULL) {
    printf(" \"%s\"will not open for writing.\n", inFileName);
    exit(1);
  }
  
  int    lineNumber = countLinesInFile(inFile);
  char** array      = (char**)malloc(sizeof(char*) * lineNumber);
  readLinesFromFile(inFile, array);

  int   order = atoi(array[0]);
  Graph G     = newGraph(order);
  int   i     = 1;
  {
    int j  = -1;
    int h  = -1;
    while (j != 0 &amp;&amp; h != 0) {
      char* next;
      j  = strtol(array[i], &amp;next, 10);
      h  = strtol(next, NULL, 10);
      if (j != 0 &amp;&amp; h != 0) {
	addEdge(G, j, h);
      }
      i ++;
    }
  }
  
  printGraph(outFile, G);
  
  {
    int st  = -1;
    int ed = -1;
    while (st != 0 &amp;&amp; ed != 0) {
      char* next;
      st = strtol(array[i], &amp;next, 10);
      ed = strtol(next, NULL, 10);
      if (st != 0 &amp;&amp; ed != 0) {
	fprintf(outFile, "\n");
	List L = newList();
	BFS(G, st);
	getPath(L, G, ed);
	moveFront(L);
	if (get(L) == NIL) {
	  fprintf(outFile, "The distance from %d to %d is infinity\n", st, ed);
	  fprintf(outFile, "No %d-%d path exists\n", st, ed);
	} else {
	  fprintf(outFile, "The distance from %d to %d is %d\n", st, ed, getDist(G, ed));
	  fprintf(outFile, "A shortest %d-%d path is:", st, ed);
	  while (listIndex(L) &gt;= 0) {
	    fprintf(outFile, " %d", get(L));
	    moveNext(L);
	  }
	  fprintf(outFile, "\n");
	}
	freeList(&amp;L);
      }
      i ++;
    }
  }
  
  fclose(outFile);
  fclose(inFile);

  freeGraph(&amp;G);
  for (i = 0; i &lt; lineNumber; i ++) {
    free(array[i]);
  }
  free(array);
</font>  return 0;
}
</pre>


</body></html>