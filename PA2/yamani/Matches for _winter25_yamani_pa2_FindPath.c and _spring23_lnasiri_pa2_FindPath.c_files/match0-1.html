
<!-- saved from url=(0120)file:///Users/surya/Desktop/moss/cse101/pa2_report/moss_results/winter25_spring23/FindPath.c/part_1/report/match0-1.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>/winter25/yamani/pa2/FindPath.c</title>
</head>
<body bgcolor="white">
<hr>
/spring23/lnasiri/pa2/FindPath.c<p></p><pre>/****************************************************************************************
*  Laila Nasiri 
*  Lnasiri
*  pa2
*****************************************************************************************/

#include "Graph.h" 
#include &lt;stdio.h&gt; 
#include &lt;stdlib.h&gt;  

// Count the number of lines in the file  
<a name="0"></a><font color="#FF0000"><a href="file:///Users/surya/Desktop/moss/cse101/pa2_report/moss_results/winter25_spring23/FindPath.c/part_1/report/match0-0.html#0" target="0"><img align="left" alt="other" border="0" src="./tm_0_99.gif"></a>

int countLinesInFile(FILE* inFile) {   
    char ch;   
    int lineExists = 0;   
    int lineNumber = 0;   
    int done = 0;   
    clearerr(inFile);   
    fseek(inFile, 0, SEEK_SET);   
    while (! done) {     
        ch = fgetc(inFile);     
        if (feof(inFile)) {       
            done = 1;     
        } else {       
            lineExists = 1;       
            if (ch == '\n') { 	
        lineNumber ++; 	
        lineExists = 0;       
            }     
        }   
    }   
    if (lineExists) {     
        lineNumber ++;   
    }   
    return lineNumber; 
}  

// Read the length of a line in the file
int readLineLengthFromFile(FILE* inFile) {   
    int offset = ftell(inFile);   
    int done = 0;   
    int len = 0;   
    char ch;   
    while (! done) {     
        ch = fgetc(inFile);     
        if (feof(inFile)) {       
            done = 1;     
        } else {       
            if (ch == '\n') { 	
        done = 1;       
            } else { 	
        len ++;       
            }     
        }   
    }   
    clearerr(inFile);   
    fseek(inFile, offset, SEEK_SET);   
    return len; 
}  

// Read a line from the file
void readLineFromFile(FILE* inFile, char* str) {   
    int done = 0;   
    int index = 0;   
    char ch;   
    while (! done) {     
        ch = fgetc(inFile);     
        if (feof(inFile)) {       
            done = 1;     
        } else {       
            if (ch == '\n') { 	
        done = 1;       
            } else { 	
        str[index] = ch; 	
        index ++;       
            }     
        }   
    }   
    str[index] = '\0'; 
}  

 // Read all the lines from the file and store them in an array of strings
void readLinesFromFile(FILE* inFile, char** array) {   
    int done = 0;   
    int lineIndex = 0;   
    int len;   
    clearerr(inFile);   
    fseek(inFile, 0, SEEK_SET);      
    
    while (! done) {     
        len = readLineLengthFromFile(inFile);     
        if (len == 0) {       
            done = 1;     
        } else {       
            array[lineIndex] = (char*)malloc(sizeof(char) * (len + 1));       
            readLineFromFile(inFile, array[lineIndex]);       
            if (feof(inFile)) { 	
        done = 1;       
            }       
            lineIndex ++;     
        }   
    } 
}  

// Check if the program was run with the correct arguments
int main(int argc, char** argv) {   
    if (argc != 3) {     
        printf("USAGE: FindPath &lt;infile&gt; &lt;outfile&gt;\n");     
        exit(-1);   
    }
    // Open the input and output files   
    char* inFileName = argv[1];   
    char* outFileName = argv[2];   
    printf("FindPath %s %s\n", inFileName, outFileName);   
    FILE* inFile = fopen(inFileName, "r");   
    if (inFile == NULL) {     
        printf("FinPath Error: Cannot open \"%s\" for reading.\n", inFileName);     
        exit(1);   
    }   
    FILE* outFile = fopen(outFileName, "w");   
    if (outFile == NULL) {     
        printf("FinPath Error: Cannot open \"%s\" for writing.\n", inFileName);     
        exit(1);   
    }  
    
    int lineNumber = countLinesInFile(inFile);   
    char** array = (char**)malloc(sizeof(char*) * lineNumber);   
    readLinesFromFile(inFile, array);           
    
    int order = atoi(array[0]);   
    Graph G = newGraph(order);   
    int i = 1;   
    {     
        int u = -1;     
        int v = -1;     
        while (u != 0 &amp;&amp; v != 0) {       
            char* next;       
            u = strtol(array[i], &amp;next, 10);       
            v = strtol(next, NULL, 10);       
            if (u != 0 &amp;&amp; v != 0) { 	
        addEdge(G, u, v);  
            }       
            i ++;    
        }   
    }      
    
    printGraph(outFile, G);      
    
    {     
        int s = -1;     
        int d = -1;     
        while (s != 0 &amp;&amp; d != 0) {       
            char* next;       
            s = strtol(array[i], &amp;next, 10);       
            d = strtol(next, NULL, 10);            
            if (s != 0 &amp;&amp; d != 0) { 	
        fprintf(outFile, "\n"); 	
        List L = newList(); 	
        BFS(G, s); 	
        getPath(L, G, d); 	
        moveFront(L); 	
        if (get(L) == NIL) { 	  
            fprintf(outFile, "The distance from %d to %d is infinity\n", s, d); 	  
            fprintf(outFile, "No %d-%d path exists\n", s, d); 	
        } else { 	  
            fprintf(outFile, "The distance from %d to %d is %d\n", s, d, getDist(G, d)); 	  
            fprintf(outFile, "A shortest %d-%d path is:", s, d); 	  
            while (index(L) &gt;= 0) { 	    
                fprintf(outFile, " %d", get(L)); 	    
                moveNext(L); 	  
            } 	  
            fprintf(outFile, "\n"); 	
        } 	
        freeList(&amp;L);       
            }       
            i ++;     
        }   
    }      
    
    fclose(outFile);   
    fclose(inFile);    
    
    freeGraph(&amp;G);   
    for (i = 0; i &lt; lineNumber; i ++) {     
        free(array[i]);   
    }   
    free(array);   
</font>    return 0; 
}











</pre>


</body></html>